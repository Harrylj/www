<!DOCTYPE html>
<html>

	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
		<meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
		<style type="text/css">
			body,
			html,
			#allmap {
				width: 100%;
				height: 200px;
				overflow: hidden;
				margin: 0;
				font-family: "微软雅黑";
			}
		</style>
		<script type="text/javascript" src="//api.map.baidu.com/api?v=2.0&ak=mZVaFMWgEm4E5S5GZC1qV1WksEdqpvbQ"></script>
		<title>可用</title>
	</head>
	<style type="text/css">
		.map_div_arrow {
			/*position: absolute;
			border-top: 10px solid white;
			border-bottom: 10px solid transparent;
			border-left: 8px solid transparent;
			border-right: 8px solid transparent;
			margin-left: -8px;
			top: 46px;
			left: 50%;*/
		}
		
		.map_div_icon {
			/*position: absolute;
			left: 50%;
			top: 66px;
			margin-left: -15px;
			width: 30px;
			height: 30px;
			background-size: 100% 100%;
			background-image: url(images/rent/rent_icon_51.png);*/
		}
		
		.map_div {
			/*position: absolute;
			font-size: 28px;
			background-color: white;
			color: black;
			line-height: 46px;
			padding: 0 10px;
			left: 50%;*/
		}
	</style>

	<body>
		<div id="allmap"></div>
	</body>

</html>
<script type="text/javascript">
	// 百度地图API功能
	var map_x = 104.1532; // 经纬度
	var map_y = 30.5993; // 经纬度
	var map_icon_src = "./images/rent/rent_icon_51.png"; //icon图标地址
	var map_txt = "成都锦城峰荟";  // 显示名字
	var mp = new BMap.Map("allmap");
	mp.centerAndZoom(new BMap.Point(map_x, map_y), 14);
	mp.enableScrollWheelZoom();
	// 复杂的自定义覆盖物
	function ComplexCustomOverlay(point, text, mouseoverText) {
		this._point = point;
		this._text = text;
		this._overText = mouseoverText;
	}
	ComplexCustomOverlay.prototype = new BMap.Overlay();
	ComplexCustomOverlay.prototype.initialize = function(map) {
		this._map = map;
		var div = this._div = document.createElement("div");
		div.className = "map_div";
		div.style.position = "absolute";
		div.style.marginTop =  "-20px"
		div.style.zIndex = BMap.Overlay.getZIndex(this._point.lat);
		div.style.backgroundColor = "white";
		div.style.border = "1px solid #f5f5f5";
		div.style.color = "#333333";
		div.style.height = "40px";
		div.style.padding = "0 20px";
		div.style.lineHeight = "40px";
		div.style.whiteSpace = "nowrap";
		div.style.MozUserSelect = "none";
		div.style.fontSize = "20px"
		var span = this._span = document.createElement("span");
		div.appendChild(span);
		span.appendChild(document.createTextNode(this._text));
		var that = this;

		var arrow = this._arrow = document.createElement("div");
		arrow.className = "map_div_arrow";
		//		    arrow.style.background = "url(//map.baidu.com/fwmap/upload/r/map/fwmap/static/house/images/label.png) no-repeat";
		arrow.style.position = "absolute";
		arrow.style.borderTop = "10px solid white";
		arrow.style.borderBottom = "10px solid transparent";
		arrow.style.borderLeft = "8px solid transparent";
		arrow.style.borderRight = "8px solid transparent";
		arrow.style.marginLeft = "-8px";
		arrow.style.top = "40px";
		arrow.style.left = "50%";
		arrow.style.overflow = "hidden";
		div.appendChild(arrow);

		var icon = this._icon = document.createElement("div");
		icon.className = "map_div_icon";
		//		icon.style.background = "url(//map.baidu.com/fwmap/upload/r/map/fwmap/static/house/images/label.png) no-repeat";
		icon.style.backgroundImage = "url(images/rent/rent_icon_51.png)";
		icon.style.backgroundSize = "100% 100%";
		icon.style.position = "absolute";
		icon.style.width = "30px";
		icon.style.height = "30px";
		icon.style.marginLeft = "-15px";
		icon.style.top = "60px";
		icon.style.left = "50%";
		icon.style.overflow = "hidden";
		div.appendChild(icon);

		mp.getPanes().labelPane.appendChild(div);

		return div;
	}
	ComplexCustomOverlay.prototype.draw = function() {
		var map = this._map;
		var pixel = map.pointToOverlayPixel(this._point);
		this._div.style.left = pixel.x - parseInt(this._arrow.style.left) + "px";
		this._div.style.top = pixel.y - 30 + "px";
	}

	var myCompOverlay = new ComplexCustomOverlay(new BMap.Point(map_x, map_y), map_txt);

	mp.addOverlay(myCompOverlay);


</script>