<!DOCTYPE html>

<html>

  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

    <title>修改密码</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">

    <!--标准mui.css-->
    <link rel="stylesheet" href="css/mui.min.css">
    <!--App自定义的css-->
    <link rel="stylesheet" type="text/css" href="css/public.css">
    <link rel="stylesheet" type="text/css" href="css/me.css"/>
 
  </head>
  <style type="text/css">

  </style>
  <body>
    <div class="me-modify-password  public-div">
      <div class="mmp-body">
        <input class="mmp-input mmp-input-old" type="password"  placeholder="请输入旧密码" />
        <input class="mmp-input mmp-input-new" type="password"  placeholder="设置新密码" />
        <h4>由大小写字母丶数字组成（字母必须含有大小写）至少8位</h4>
        <input class="mmp-input mmp-input-new-again" type="password"  placeholder="再次确认新密码" />
        <h5 class="mmp-ts"></h5>
        <a href="www"><div class="mmp-btn-qdxg">确定修改</div></a>
      </div>
      
    </div>
    <script src="js/jquery-1.12.4.min.js" type="text/javascript" charset="utf-8"></script>
    <script type="text/javascript">
    	$(function(){
    	  
        
    	  // 密码验证函数，大等于3则包含大小写和数字,1为缺少数字，2为缺少大小写
    	  function passwordLevel(password) {
            var Modes = 0;
            for (i = 0; i < password.length; i++) {
                Modes |= CharMode(password.charCodeAt(i));
            }
            return bitTotal(Modes);
         
            //CharMode函数
            function CharMode(iN) {
                if (iN >= 48 && iN <= 57)//数字
                    return 1;
                if (iN >= 65 && iN <= 90) //大写字母
                    return 2;
                if ((iN >= 97 && iN <= 122) || (iN >= 65 && iN <= 90)) //大小写
                    return 4;
                else
                    return 8; //特殊字符
            }
         
            //bitTotal函数
            function bitTotal(num) {
                modes = 0;
                for (i = 0; i < 4; i++) {
                    if (num & 1) modes++;
                    num >>>= 1;
                }
                return modes;
            }
        }
    	  // 重制提示
    	  $('.mmp-ts').html('');
    	  
        // 点击确定修改按钮
        $('.mmp-btn-qdxg').on('click',function(){
          // 假设旧密码是1234
          var num_true = '1234',
            ts_01 = '旧密码不对',
            ts_02 = '新密码格式不对',
            ts_021 = '新密码格式缺少数字',
            ts_022 = '新密码格式缺少大小写',
            ts_023 = '新密码格式少于8位',
            ts_03 = '新密码不一致',
            ts_04 = '修改成功',
            e_ts = $('.mmp-ts'),
            e_old = $('.mmp-input-old'),
            e_new = $('.mmp-input-new'),
            e_new_agin = $('.mmp-input-new-again');
           // 旧密码不对
           if(e_old.val() != num_true){
             e_ts.html(ts_01)
             return false;
           }
           // 新密码格式缺少数字
           else if(passwordLevel(e_new.val()) < 1){
             e_ts.html(ts_021)
             return false;
           }
           // 新密码格式缺少大小写
           else if(passwordLevel(e_new.val()) < 3){
             e_ts.html(ts_022)
             return false;
           }
           // 新密码格式少于8位
           else if(passwordLevel(e_new.val()) < 3 || e_new.val().length < 8){
             e_ts.html(ts_023)
             return false;
           }
           // 新密码不一致
           else if(e_new.val()!= e_new_agin.val()){
             e_ts.html(ts_03)
             return false;
           }
           // 修改成功
           else{
             e_ts.html(ts_04)
             return true;
           }
        })
    	})
    </script>

  </body>

</html>