(window.MIP=window.MIP||[]).push({name:"mip-stats-baidu",func:function(){define("mip-stats-baidu/mip-stats-baidu",["require","viewer","util","customElement"],function(t){function e(){for(var t=document.querySelectorAll("*[data-stats-baidu-obj]"),e=0;e<t.length;e++){var o=t[e].getAttribute("data-stats-baidu-obj");if(o){try{o=JSON.parse(decodeURIComponent(o))}catch(t){console.warn("事件追踪data-stats-baidu-obj数据不正确");continue}var r=o.type;if(o.data){var s=n(o.data);if("click"===r||"mouseup"===r||"load"===r)if(!t[e].classList.contains("mip-stats-eventload"))if(t[e].classList.add("mip-stats-eventload"),"load"===r)window._hmt.push(s);else if("click"===r&&t[e].hasAttribute("on")&&t[e].getAttribute("on").match("tap:")&&u.hasTouch()){var a=new c(t[e]);a.on("tap",i)}else t[e].addEventListener(r,i,!1)}}}}function i(t){var e=this.getAttribute("data-stats-baidu-obj");if(e){var i;try{i=JSON.parse(decodeURIComponent(e))}catch(t){return void console.warn("事件追踪data-stats-baidu-obj数据不正确")}if(i.data){var o=n(i.data);window._hmt.push(o)}}}function n(t){if(t){if("object"==typeof t)return t;for(var e=t.slice(1,t.length-1).split(","),i=[],n=0;n<e.length;n++){var o=e[n].replace(/(^\s*)|(\s*$)/g,"").replace(/\'/g,"");if("false"===o||"true"===o)o=Boolean(o);i.push(o)}return i}}function o(){var t="",e={},i=MIP.hash.get("word")||"",n=MIP.hash.get("eqid")||"";if(r(MIP.hash.get("from")||"","result")){if((i||n)&&document.referrer)e.url="",e.eqid=n,e.word=i,t=document.referrer}else e.url="",t=location.origin+location.pathname+location.search;window._hmt.push(["_setReferrerOverride",s(t,e)])}function r(t,e){if(t&&e&&t===e)return!0;else return!1}function s(t,e){var i="",n=t.indexOf("?")<0?"?":"&",o="";for(var r in e)o+="&"+r+"="+e[r];if(o=o.slice(1),t.indexOf("#")<0&&o)i=t+n+o;else i=t.replace("#",n+o+"#");return i}var a=t("viewer"),l=t("util"),c=l.Gesture,u=t("util").fn,d=t("customElement").create();return d.prototype.createdCallback=function(){var t=this.element,i=this.getConfig(),n=i.token;if(n){if(window._hmt=window._hmt||[],window._hmt.push(["_setAccount",n]),a.isIframed)o();if(i&&Array.isArray(i.conf)&&i.conf.length)for(var r=i.conf,s=0;s<r.length;s++)window._hmt.push(r[s]);e();var l=document.createElement("script");l.src="https://hm.baidu.com/hm.js?"+n,t.appendChild(l)}else console.warn("token is unavailable")},d.prototype.getConfig=function(){var t={},e=this.element.getAttribute("setconfig");try{var i=this.element.querySelector('script[type="application/json"]');if(i){var o=JSON.parse(i.textContent);if("{}"!==JSON.stringify(o))t.token=o.token,l.fn.del(o,"token"),t.conf=this.objToArray(o);return t}}catch(t){console.warn("json is illegal"),console.warn(t)}return{token:this.element.getAttribute("token"),conf:e?new Array(n(decodeURIComponent(e))):null}},d.prototype.objToArray=function(t){var e=[];if(t){for(var i in t)if(t.hasOwnProperty(i)&&Array.isArray(t[i]))t[i].unshift(i),e.push(t[i]);return e}},d}),define("mip-stats-baidu",["mip-stats-baidu/mip-stats-baidu"],function(t){return t}),function(){function t(t,e){t.registerMipElement("mip-stats-baidu",e)}if(window.MIP)require(["mip-stats-baidu"],function(e){t(window.MIP,e)});else require(["mip","mip-stats-baidu"],t)}()}});