
<div class="cabr-body-xjkc">
  <h1>新建考题</h1>
  <!-- 考题设置 -->
  <div class="ca-xjkc-content">
    <h2>考题设置</h2>
    <table class="xjkc-table">
      <tr>
        <td>考试题目</td>
        <td>
          <input id="tcm-input-kstm" class="tcn-btn-one tcn-btn-one-kstm" type="text" placeholder="政治类">
        </td>
      </tr>
      <tr>
        <td>考试班级</td>
        <td>
          <label>
            <select>
              <option value="1">2018级3班</option>
              <option value="2">项目1</option>
              <option value="3">项目2</option>
            </select>
          </label>
        </td>
      </tr>
      <tr>
        <td>题目详情</td>
        <td class="tmxjkt-number-div">
          <div class="tcn-tmxq-div">
            <label>
              <select class="tcn-tmxq-one" disabled="disabled">
                <option value="1" selected>单选题</option>
                <option value="2">多选题</option>
                <option value="3">判断题</option>
                <option value="4">简答题</option>
              </select>
            </label>
            选
            <label>
              <select class="tcn-tmxq-select tcn-tmxq-two">
                <option value="20">20道</option>
                <option value="1">1道</option>
                <option value="2">2道</option>
              </select>
            </label>
            每题
            <label>
              <select class="tcn-tmxq-select tcn-tmxq-three">
                <option value="3">3分</option>
                <option value="2">2分</option>
                <option value="1">1分</option>
              </select>
            </label>
            <p class="tcn-tmxq-number">共计
              <span>60</span>分</p>
          </div>
          <div class="tcn-tmxq-div">
            <label>
              <select class="tcn-tmxq-one" disabled="disabled">
                <option value="1">单选题</option>
                <option value="2" selected>多选题</option>
                <option value="3">判断题</option>
                <option value="4">简答题</option>
              </select>
            </label>
            选
            <label>
              <select class="tcn-tmxq-select tcn-tmxq-two">
                <option value="20">20道</option>
                <option value="1">1道</option>
                <option value="2">2道</option>
              </select>
            </label>
            每题
            <label>
              <select class="tcn-tmxq-select tcn-tmxq-three">
                <option value="3">3分</option>
                <option value="2">2分</option>
                <option value="1">1分</option>
              </select>
            </label>
            <p class="tcn-tmxq-number">共计
              <span>60</span>分</p>
          </div>
          <div class="tcn-tmxq-div">
            <label>
              <select class="tcn-tmxq-one" disabled="disabled">
                <option value="1">单选题</option>
                <option value="2">多选题</option>
                <option value="3" selected>判断题</option>
                <option value="4">简答题</option>
              </select>
            </label>
            选
            <label>
              <select class="tcn-tmxq-select tcn-tmxq-two">
                <option value="20">20道</option>
                <option value="1">1道</option>
                <option value="2">2道</option>
              </select>
            </label>
            每题
            <label>
              <select class="tcn-tmxq-select tcn-tmxq-three">
                <option value="3">3分</option>
                <option value="2">2分</option>
                <option value="1">1分</option>
              </select>
            </label>
            <p class="tcn-tmxq-number">共计
              <span>60</span>分</p>
          </div>
          <div class="tcn-tmxq-div">
            <label>
              <select class="tcn-tmxq-one" disabled="disabled">
                <option value="1">单选题</option>
                <option value="2">多选题</option>
                <option value="3">判断题</option>
                <option value="4" selected>简答题</option>
              </select>
            </label>
            选
            <label>
              <select class="tcn-tmxq-select tcn-tmxq-two">
                <option value="20">20道</option>
                <option value="1">1道</option>
                <option value="2">2道</option>
              </select>
            </label>
            每题
            <label>
              <select class="tcn-tmxq-select tcn-tmxq-three">
                <option value="3">3分</option>
                <option value="2">2分</option>
                <option value="1">1分</option>
              </select>
            </label>
            <p class="tcn-tmxq-number">共计
              <span>0</span>分</p>
          </div>
          <p>
            <button class="tcn-btn-jxtj">继续添加</button>
          </p>
        </td>
      </tr>
      <tr>
        <td>总分</td>
        <td>
          <input class="tcn-btn-one tmxjkt-input-all-num" type="text" placeholder="100分">
          <button class="tcn-btn-two tcn-btn-jszf">计算总分</button>
        </td>
      </tr>
    </table>
    <table class="xjkc-table">
      <tr>
        <td>导入试卷</td>
        <td>
          <input class="tcn-btn-one" type="text" placeholder="单选题">
          <button class="tcn-btn-two tcn-btn-drsp">导入</button>
        </td>
      </tr>
      <tr>
        <td></td>
        <td>
          <div class="abc-div-bg-02">
            <p>全国考试第一卷试卷</p>
            <button class="adc-btn-delete">删除</button>
          </div>
          <div class="abc-div-bg-02">
            <p>全国考试第一卷试卷</p>
            <button class="adc-btn-delete">删除</button>
          </div>
        </td>
      </tr>
      <tr>
        <td></td>
        <td>
          <input class="tcn-btn-one" type="text" placeholder="整个试卷">
          <button class="tcn-btn-two tcn-btn-drsp">导入</button>
        </td>
      </tr>
      <tr>
        <td></td>
        <td>
          <div class="abc-div-bg-02">
            <p>全国考试第一卷试卷</p>
            <button class="adc-btn-delete">删除</button>
          </div>
          <div class="abc-div-bg-02">
            <p>全国考试第一卷试卷</p>
            <button class="adc-btn-delete">删除</button>
          </div>
        </td>
      </tr>
      <tr>
        <td></td>
        <td>
          <p><button class="tcn-btn-two">导入答案</button></p>
          <p><button class="tcn-btn-two">继续导入</button></p>
        </td>
      </tr>
    </table>

    <table class="xjkc-table">
        <tr>
          <td>考试时间</td>
          <td>
            <label>
              <select>
                <option value="1">150分钟</option>
                <option value="2">项目1</option>
                <option value="3">项目2</option>
              </select>
            </label>
          </td>
        </tr>
        <tr>
          <td>允许做题</td>
          <td>
            <label>
              <select>
                <option value="1">允许学生开始做题</option>
                <option value="2">项目1</option>
                <option value="3">项目2</option>
              </select>
            </label>
          </td>
        </tr>
        <tr>
            <td>允许查看</td>
            <td>
              <label>
                <select>
                  <option value="1">考试完成后没允许立即查看结果</option>
                  <option value="2">项目1</option>
                  <option value="3">项目2</option>
                </select>
              </label>
            </td>
          </tr>
          <tr>
              <td>限制IP</td>
              <td>
                <label>
                  <select>
                    <option value="1">限制IP</option>
                    <option value="2">项目1</option>
                    <option value="3">项目2</option>
                  </select>
                </label>
              </td>
            </tr>
      </table>
  </div>
  <p class="tcn-p-ts tmxjkt-p-ts">错误提示</p>
  <p><button  class="tcn-btn-kcwc tmxjkt-btn-wcsz">完成设置</button></p>
</div>

<script type="text/javascript">
  $(function () {
    // select 更改对应分数
    $('.tcn-tmxq-select').change(function () {
      var classSelect = 'tcn-tmxq-select';
      numOne = $(this).find("option:selected").val();
      numTwo = $(this).parent().siblings('label').children('.' + classSelect).find("option:selected").val();
      $(this).parent().siblings('.tcn-tmxq-number').children('span').html(numOne * numTwo);
      // 初始加载总分函数
      getAllNum('.tmxjkt-number-div','.tmxjkt-input-all-num')
    })
    // 初始化选中分数
    $('.tcn-tmxq-number').each(function () {
      var numOne = $(this).siblings('label').eq(1).children('.tcn-tmxq-select').find("option:selected").val(),
        numTwo = $(this).siblings('label').eq(2).children('.tcn-tmxq-select').find("option:selected").val();
      $(this).children('span').html(numOne * numTwo)
    })
    // 计算总分
    $('.tcn-btn-jszf').on('click', function () {
      // 初始加载总分函数
      getAllNum('.tmxjkt-number-div','.tmxjkt-input-all-num')
    })

    // 初始加载总分函数
    getAllNum('.tmxjkt-number-div','.tmxjkt-input-all-num')
    // 计算总分函数--onlyDivOne：计算值的父元素,onlyDivTwo:总值必须唯一，不然其他页面的值会影响到你
    function getAllNum(onlyDivOne,onlyDivTwo) {
      var numberAll = 0;
      $(onlyDivOne).children('.tcn-tmxq-div').each(function () {
        numberAll = numberAll + parseInt($(this).find('.tcn-tmxq-number').children('span').html());
      })
      $(onlyDivTwo).val(numberAll + '分');
    }

    // 点击继续添加
    $('.tcn-btn-jxtj').on('click', function () {
      alert('添加个鬼')
    })

    // 点击删除导入试卷
    $('.techaer-course-new').on('click', '.adc-btn-delete', function () {
      $(this).parents('.abc-div-bg-02').remove();
    })

    // 点击课程完成
    $('.tmxjkt-btn-wcsz').on('click',function(){
      var tsDiv = $('.tmxjkt-p-ts');
      // 考题题目不能为空
      if($('#tcm-input-kstm').val() == '')
      {
        tsDiv.html('考题题目不能为空').show();
      }
      // 完成
      else
      {
        tsDiv.html('').hide();
        alert('完成设置')
      }
    })
  })
</script>